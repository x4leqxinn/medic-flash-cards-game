<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meow-Dicina Flashcards | Estudio Tierno</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-soft: #fff5f8;
            --bg-card: #ffffff;
            --primary-pink: #ff85a1;
            --secondary-pink: #fbb1bd;
            --medical-blue: #a2d2ff;
            --medical-green: #bde0fe;
            --text-main: #5c527f;
            --text-dim: #9b9b9b;
            --danger: #ff6b6b;
            --success: #6bcb77;
            --font-family: 'Fredoka', cursive, sans-serif;
            --transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --shadow: 0 8px 20px rgba(255, 133, 161, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-soft);
            background-image:
                radial-gradient(var(--secondary-pink) 1px, transparent 1px);
            background-size: 30px 30px;
            color: var(--text-main);
            font-family: var(--font-family);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
        }

        /* Decorative Kittens */
        .decoration {
            position: fixed;
            font-size: 2rem;
            z-index: -1;
            opacity: 0.4;
            pointer-events: none;
        }

        /* Header & Navigation */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: var(--shadow);
            border: 2px solid var(--secondary-pink);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-pink);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-buttons {
            display: flex;
            gap: 0.8rem;
        }

        /* Buttons */
        .btn {
            background: white;
            border: 2px solid var(--primary-pink);
            color: var(--primary-pink);
            padding: 0.7rem 1.4rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 0 var(--primary-pink);
            position: relative;
            top: 0;
        }

        .btn:hover {
            top: -2px;
            box-shadow: 0 6px 0 var(--primary-pink);
            background: var(--bg-soft);
        }

        .btn:active {
            top: 2px;
            box-shadow: 0 0px 0 var(--primary-pink);
        }

        .btn:disabled {
            border-color: #ddd;
            color: #ddd;
            box-shadow: 0 4px 0 #ddd;
            cursor: not-allowed;
            top: 0;
        }

        .btn-purple {
            border-color: var(--medical-blue);
            color: var(--medical-blue);
            box-shadow: 0 4px 0 var(--medical-blue);
        }

        .btn-purple:hover {
            box-shadow: 0 6px 0 var(--medical-blue);
        }

        .btn-danger {
            border-color: var(--danger);
            color: var(--danger);
            box-shadow: 0 4px 0 var(--danger);
        }

        /* Views */
        .view {
            display: none;
            animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .view.active {
            display: block;
        }

        @keyframes bounceIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 30px;
            box-shadow: var(--shadow);
            border: 3px dashed var(--secondary-pink);
        }

        .empty-state h2 {
            color: var(--text-dim);
            margin-bottom: 1.5rem;
            font-weight: 400;
        }

        /* Form */
        .card-form {
            background: var(--bg-card);
            padding: 2.5rem;
            border-radius: 30px;
            border: 2px solid var(--secondary-pink);
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--primary-pink);
            font-size: 1rem;
            font-weight: 700;
        }

        .form-group textarea {
            width: 100%;
            background: #fff;
            border: 2px solid var(--secondary-pink);
            border-radius: 15px;
            padding: 1rem;
            color: var(--text-main);
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
            transition: var(--transition);
        }

        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-pink);
            background: #fff;
            box-shadow: 0 0 0 4px rgba(255, 133, 161, 0.1);
        }

        /* Grid / Library */
        .flashcards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .mini-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 1.5rem;
            border: 2px solid transparent;
            position: relative;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .mini-card:hover {
            border-color: var(--primary-pink);
            transform: translateY(-8px) rotate(1deg);
        }

        .mini-card h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--primary-pink);
        }

        .mini-card p {
            font-size: 0.95rem;
            color: var(--text-dim);
        }

        .delete-card {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #fff0f3;
            border: 1px solid var(--danger);
            color: var(--danger);
            cursor: pointer;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .delete-card:hover {
            background: var(--danger);
            color: white;
            transform: scale(1.2);
        }

        /* Game Area */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .game-stats {
            display: flex;
            gap: 1.5rem;
            background: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            box-shadow: var(--shadow);
            border: 2px solid var(--secondary-pink);
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .stat-success {
            color: var(--success);
        }

        .stat-fail {
            color: var(--danger);
        }

        /* FLIP CARD */
        .flip-card {
            background-color: transparent;
            width: 100%;
            max-width: 500px;
            height: 350px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2.5rem;
            border-radius: 30px;
            font-size: 1.6rem;
            font-weight: 500;
            box-shadow: 0 15px 40px rgba(255, 133, 161, 0.2);
            border: 4px solid white;
        }

        .flip-card-front {
            background: linear-gradient(135deg, white, #fff0f3);
            color: var(--text-main);
        }

        .flip-card-back {
            background: linear-gradient(135deg, #fff0f3, white);
            color: var(--primary-pink);
            transform: rotateY(180deg);
            border-color: var(--medical-blue);
        }

        .flip-card::after {
            content: "üêæ";
            position: absolute;
            bottom: -15px;
            right: -15px;
            font-size: 2rem;
            transform: rotate(20deg);
        }

        .game-controls {
            display: flex;
            gap: 1.5rem;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
        }

        .game-controls.show {
            opacity: 1;
            pointer-events: all;
            transform: translateY(-10px);
        }

        /* Results */
        .results-view {
            text-align: center;
            background: white;
            padding: 3rem;
            border-radius: 40px;
            box-shadow: var(--shadow);
            border: 3px solid var(--secondary-pink);
        }

        .results-view h2 {
            font-size: 2.2rem;
            margin-bottom: 2rem;
            color: var(--primary-pink);
        }

        /* Toast notifications */
        #toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            border: 2px solid var(--primary-pink);
            border-radius: 20px;
            padding: 1rem 2rem;
            transform: translateX(200%);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            box-shadow: var(--shadow);
            color: var(--primary-pink);
            font-weight: 600;
        }

        #toast.show {
            transform: translateX(0);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-soft);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary-pink);
            border-radius: 10px;
            border: 3px solid var(--bg-soft);
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }

            header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                padding: 1rem;
            }

            .flip-card {
                height: 300px;
            }

            .nav-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>

<body>

    <div class="decoration" style="top: 10%; left: 5%;">üê±</div>
    <div class="decoration" style="top: 20%; right: 8%;">ü©∫</div>
    <div class="decoration" style="bottom: 15%; left: 7%;">üíä</div>
    <div class="decoration" style="bottom: 10%; right: 5%;">üêæ</div>
    <div class="decoration" style="top: 40%; left: 2%;">‚ù§Ô∏è</div>

    <div class="container">
        <header>
            <div class="logo">üê± Kustman ‚ù§Ô∏è</div>
            <nav class="nav-buttons">
                <button class="btn" id="nav-home">üìö Mis Notas</button>
                <button class="btn btn-purple" id="nav-add">‚ú® Nueva</button>
                <button class="btn" id="start-game-btn" disabled>üéÆ Estudiar</button>
            </nav>
        </header>

        <!-- HOME VIEW (Library) -->
        <main id="view-home" class="view active">
            <div id="empty-container" class="empty-state">
                <div style="font-size: 4rem; margin-bottom: 1rem;">üò¥</div>
                <h2>Tu malet√≠n est√° vac√≠o...</h2>
                <button class="btn btn-purple" onclick="showView('add')">Crear mi primera tarjeta ü©π</button>
            </div>

            <div id="library-container" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2 style="font-weight: 600; color: var(--text-main);">Mis Tarjetas M√©dicas ü©∫</h2>
                    <button class="btn btn-danger" onclick="clearAllCards()"
                        style="padding: 0.5rem 1rem; font-size: 0.7rem;">Vaciar Malet√≠n</button>
                </div>
                <div class="flashcards-grid" id="cards-grid">
                    <!-- Cards injection -->
                </div>
            </div>
        </main>

        <!-- ADD VIEW -->
        <section id="view-add" class="view">
            <div class="card-form">
                <h2 style="margin-bottom: 2rem; color: var(--primary-pink); text-align: center;">üçé Nueva Tarjeta de
                    Estudio</h2>
                <div class="form-group">
                    <label>Frente (Concepto o S√≠ntoma)</label>
                    <textarea id="card-front" placeholder="Ej: Anatom√≠a del coraz√≥n..."></textarea>
                </div>
                <div class="form-group">
                    <label>Reverso (Tratamiento o Definici√≥n)</label>
                    <textarea id="card-back" placeholder="Escribe la respuesta aqu√≠..."></textarea>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem;">
                    <button class="btn" style="background: var(--primary-pink); color: white;" onclick="saveCard()">üíñ
                        Guardar</button>
                    <button class="btn" style="border-color: #ccc; color: #999; box-shadow: 0 4px 0 #ccc;"
                        onclick="showView('home')">Cancelar</button>
                </div>
            </div>
        </section>

        <!-- GAME VIEW -->
        <section id="view-game" class="view">
            <div class="game-container">
                <div class="game-stats">
                    <div class="stat">
                        <span class="stat-value" id="current-card-idx">1</span>
                        <span style="font-size: 0.75rem; color: var(--text-dim); font-weight: 600;">PASO</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value stat-success" id="success-count">0</span>
                        <span style="font-size: 0.75rem; color: var(--text-dim); font-weight: 600;">LOGRADO</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value stat-fail" id="fail-count">0</span>
                        <span style="font-size: 0.75rem; color: var(--text-dim); font-weight: 600;">REPASAR</span>
                    </div>
                </div>

                <div class="flip-card" id="main-flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front" id="game-front">
                            <!-- Question -->
                        </div>
                        <div class="flip-card-back" id="game-back">
                            <!-- Answer -->
                        </div>
                    </div>
                </div>

                <p
                    style="color: var(--primary-pink); font-size: 0.9rem; font-weight: 600; animation: pulse 2s infinite;">
                    üêæ TOCA PARA REVELAR LA RESPUESTA üêæ</p>

                <div class="game-controls" id="game-controls">
                    <button class="btn btn-danger" onclick="handleGameAnswer(false)">üòø No lo supe</button>
                    <button class="btn"
                        style="border-color: var(--success); color: var(--success); box-shadow: 0 4px 0 var(--success);"
                        onclick="handleGameAnswer(true)">üò∏ ¬°Lo supe!</button>
                </div>
            </div>
        </section>

        <!-- RESULTS VIEW -->
        <section id="view-results" class="view results-view">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üéâ</div>
            <h2>¬°Excelente Guardi√°n!</h2>
            <p style="margin-bottom: 2rem; color: var(--text-dim);">Has completado tu ronda de estudio.</p>
            <div class="game-stats"
                style="justify-content: center; margin-bottom: 3rem; border: none; box-shadow: none;">
                <div class="stat">
                    <span class="stat-value stat-success" id="final-success">0</span>
                    <span style="font-weight: 600;">√âXITOS</span>
                </div>
                <div style="width: 2px; background: #eee; margin: 0 1rem;"></div>
                <div class="stat">
                    <span class="stat-value stat-fail" id="final-fail">0</span>
                    <span style="font-weight: 600;">FALLOS</span>
                </div>
            </div>
            <button class="btn"
                style="background: var(--medical-blue); border-color: var(--medical-blue); color: white; box-shadow: 0 4px 0 #7fb9f0;"
                onclick="showView('home')">Volver al Inicio üò∫</button>
        </section>
    </div>

    <div id="toast">¬°Tarjeta guardada con √©xito! üêæ</div>

    <style>
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }

            50% {
                transform: scale(1.05);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 0.8;
            }
        }
    </style>

    <script>
        // --- State Management ---
        const LS_KEY = 'yuki_flashcards_app';
        let flashcards = JSON.parse(localStorage.getItem(LS_KEY)) || [];

        let gameState = {
            currentIndex: 0,
            success: 0,
            fail: 0,
            shuffled: []
        };

        // --- DOM Elements ---
        const views = document.querySelectorAll('.view');
        const cardsGrid = document.getElementById('cards-grid');
        const emptyContainer = document.getElementById('empty-container');
        const libraryContainer = document.getElementById('library-container');
        const startGameBtn = document.getElementById('start-game-btn');
        const mainFlipCard = document.getElementById('main-flip-card');

        // --- Navigation ---
        function showView(viewId) {
            views.forEach(v => v.classList.remove('active'));
            const target = document.getElementById(`view-${viewId}`);
            if (target) {
                target.classList.add('active');
            }

            if (viewId === 'home') renderLibrary();
            window.scrollTo(0, 0);
        }

        document.getElementById('nav-home').addEventListener('click', () => showView('home'));
        document.getElementById('nav-add').addEventListener('click', () => showView('add'));
        startGameBtn.addEventListener('click', initGame);

        // --- CRUD Logic ---
        function saveCard() {
            const front = document.getElementById('card-front').value.trim();
            const back = document.getElementById('card-back').value.trim();

            if (!front || !back) {
                showToast('¬°Ay! Faltan datos en la receta ü©∫', true);
                return;
            }

            const newCard = {
                id: Date.now(),
                front,
                back
            };

            flashcards.push(newCard);
            localStorage.setItem(LS_KEY, JSON.stringify(flashcards));

            document.getElementById('card-front').value = '';
            document.getElementById('card-back').value = '';

            showToast('¬°Tarjeta guardada en el historial! üêæ');
            showView('home');
        }

        function deleteCard(id) {
            if (!confirm('¬øDeseas eliminar este registro m√©dico? üòø')) return;
            flashcards = flashcards.filter(c => c.id !== id);
            localStorage.setItem(LS_KEY, JSON.stringify(flashcards));
            renderLibrary();
            showToast('Registro eliminado üóëÔ∏è');
        }

        function clearAllCards() {
            if (!confirm('¬øBORRAR TODO EL MALET√çN? üéí Esta acci√≥n es permanente.')) return;
            flashcards = [];
            localStorage.setItem(LS_KEY, JSON.stringify(flashcards));
            renderLibrary();
        }

        function renderLibrary() {
            cardsGrid.innerHTML = '';

            if (flashcards.length === 0) {
                emptyContainer.style.display = 'block';
                libraryContainer.style.display = 'none';
                startGameBtn.disabled = true;
                return;
            }

            emptyContainer.style.display = 'none';
            libraryContainer.style.display = 'block';
            startGameBtn.disabled = false;

            flashcards.forEach(card => {
                const cardEl = document.createElement('div');
                cardEl.className = 'mini-card';
                cardEl.innerHTML = `
                    <button class="delete-card" onclick="deleteCard(${card.id})">√ó</button>
                    <div style="font-size: 0.8rem; color: var(--medical-blue); margin-bottom: 0.3rem;">üìã Registro #${card.id.toString().slice(-4)}</div>
                    <h3>${card.front}</h3>
                    <p>${card.back.substring(0, 100)}${card.back.length > 100 ? '...' : ''}</p>
                `;
                cardsGrid.appendChild(cardEl);
            });
        }

        // --- Game Logic ---
        function initGame() {
            if (flashcards.length === 0) return;

            gameState.shuffled = [...flashcards].sort(() => Math.random() - 0.5);
            gameState.currentIndex = 0;
            gameState.success = 0;
            gameState.fail = 0;

            updateGameUI();
            showView('game');
        }

        function updateGameUI() {
            const card = gameState.shuffled[gameState.currentIndex];
            const frontEl = document.getElementById('game-front');
            const backEl = document.getElementById('game-back');

            mainFlipCard.classList.remove('flipped');
            document.getElementById('game-controls').classList.remove('show');

            frontEl.textContent = card.front;
            backEl.textContent = card.back;

            document.getElementById('current-card-idx').textContent = `${gameState.currentIndex + 1}/${gameState.shuffled.length}`;
            document.getElementById('success-count').textContent = gameState.success;
            document.getElementById('fail-count').textContent = gameState.fail;
        }

        mainFlipCard.addEventListener('click', () => {
            mainFlipCard.classList.toggle('flipped');
            if (mainFlipCard.classList.contains('flipped')) {
                document.getElementById('game-controls').classList.add('show');
            }
        });

        function handleGameAnswer(isCorrect) {
            if (isCorrect) gameState.success++;
            else gameState.fail++;

            gameState.currentIndex++;

            if (gameState.currentIndex < gameState.shuffled.length) {
                updateGameUI();
            } else {
                finishGame();
            }
        }

        function finishGame() {
            document.getElementById('final-success').textContent = gameState.success;
            document.getElementById('final-fail').textContent = gameState.fail;
            showView('results');
        }

        // --- UI Helpers ---
        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.style.borderColor = isError ? 'var(--danger)' : 'var(--primary-pink)';
            toast.style.color = isError ? 'var(--danger)' : 'var(--primary-pink)';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // --- Initial Load ---
        renderLibrary();

    </script>
</body>

</html>